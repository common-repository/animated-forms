!function(e){var t,$,n={x:0,y:0,px:0,py:0,down:!1},r=[],o=[];function s(){var e=n.x-n.px,y=n.y-n.py;for(i=0;i<r.length;i++){var x=r[i];for(j=0;j<x.length;j++){var a=x[j];n.down&&v(a,e,y,40),u(a)}}for($.clearRect(0,0,t.width,t.height),$.strokeStyle="#FFFFFF",function e(){for(i=0;i<o.length;i++){var t=o[i];if(t.x>=0&&t.x<1600&&t.y>=0&&t.y<800){var n=parseInt(t.x/20),s=parseInt(t.y/20),v=r[n][s],u=t.x%20/20,p=t.y%20/20;t.xv+=(1-u)*v.xv*.05,t.yv+=(1-p)*v.yv*.05,t.xv+=u*v.right.xv*.05,t.yv+=u*v.right.yv*.05,t.xv+=p*v.down.xv*.05,t.yv+=p*v.down.yv*.05,t.x+=t.xv,t.y+=t.yv;var y=t.px-t.x,x=t.py-t.y,a=.5*Math.random();Math.sqrt(y*y+x*x)>a?($.lineWidth=1,$.beginPath(),$.moveTo(t.x,t.y),$.lineTo(t.px,t.py),$.stroke()):($.beginPath(),$.moveTo(t.x,t.y),$.lineTo(t.x+a,t.y+a),$.stroke()),t.px=t.x,t.py=t.y}else t.x=t.px=1600*Math.random(),t.y=t.py=800*Math.random(),t.xv=0,t.yv=0;t.xv*=.5,t.yv*=.5}}(),i=0;i<r.length;i++){var x=r[i];for(j=0;j<x.length;j++){var a=x[j];p(a)}}n.px=n.x,n.py=n.y,requestAnimationFrame(s)}function v(e,t,$,r){var o=e.x-n.x,s=e.y-n.y,v=Math.sqrt(s*s+o*o);if(v<r){v<4&&(v=r);var u=r/v;e.xv+=t*u,e.yv+=$*u}}function u(e){var t=.5*e.up_left.xv+e.left.xv+.5*e.down_left.xv-.5*e.up_right.xv-e.right.xv-.5*e.down_right.xv,$=.5*e.up_left.yv+e.up.yv+.5*e.up_right.yv-.5*e.down_left.yv-e.down.yv-.5*e.down_right.yv;e.pressure=(t+$)*.25}function p(e){e.xv+=(.5*e.up_left.pressure+e.left.pressure+.5*e.down_left.pressure-.5*e.up_right.pressure-e.right.pressure-.5*e.down_right.pressure)*.25,e.yv+=(.5*e.up_left.pressure+e.up.pressure+.5*e.up_right.pressure-.5*e.down_left.pressure-e.down.pressure-.5*e.down_right.pressure)*.25,e.xv*=.99,e.yv*=.99}function y(e,t,$){this.x=e,this.y=t,this.r=$,this.col=0,this.row=0,this.xv=0,this.yv=0,this.pressure=0}function x(e,t){this.x=this.px=e,this.y=this.py=t,this.xv=this.yv=0}function a(e){e.preventDefault(),n.down=!0}function h(){n.down=!1}function f(e){e.preventDefault();var $=t.getBoundingClientRect();n.x=n.px=e.touches[0].pageX-$.left,n.y=n.py=e.touches[0].pageY-$.top,n.down=!0}function d(e){e.touches||(n.down=!1)}function l(e){e.preventDefault(),n.px=n.x,n.py=n.y,n.x=e.offsetX||e.layerX,n.y=e.offsetY||e.layerY}function g(e){e.preventDefault(),n.px=n.x,n.py=n.y;var $=t.getBoundingClientRect();n.x=e.touches[0].pageX-$.left,n.y=e.touches[0].pageY-$.top}e.Fluid={initialize:function n(){for(i=0,$=(t=document.getElementById("pmaf-click-drag")).getContext("2d"),t.width=1600,t.height=800;i<3e4;i++)o.push(new x(1600*Math.random(),800*Math.random()));for(col=0;col<80;col++)for(row=0,r[col]=[];row<40;row++){var v=new y(20*col,20*row,20);r[col][row]=v,r[col][row].col=col,r[col][row].row=row}for(col=0;col<80;col++)for(row=0;row<40;row++){var v=r[col][row],u=row-1>=0?row-1:39,p=col-1>=0?col-1:79,c=col+1<80?col+1:0,w=r[col][u],m=r[p][row],_=r[p][u],F=r[c][u];v.up=w,v.left=m,v.up_left=_,v.up_right=F,w.down=r[col][row],m.right=r[col][row],_.down_right=r[col][row],F.down_left=r[col][row]}t.addEventListener("mousedown",a),e.addEventListener("touchstart",f),t.addEventListener("mouseup",h),e.addEventListener("touchend",d),e.addEventListener("mousemove",l),e.addEventListener("touchmove",g),e.onload=s}}}(window),window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,Fluid.initialize();